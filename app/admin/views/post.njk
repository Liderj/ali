{% extends "layouts/base.html" %}
{% block cssblock %}
<link rel="stylesheet" href="/css/markdown.css">
{% endblock %}
{% block body %}
<table class="layui-table">
  <thead>
    <tr>
      <th>
        <div class="layui-unselect header layui-form-checkbox" lay-skin="primary"><i class="layui-icon">&#xe605;</i></div>
      </th>
      <th style="width:150px">ID</th>
      <th>标题</th>
      <th>创建日期</th>
      <th>操作</th>
  </thead>
  <tbody>
    {% for post in posts%}
    <tr>
      <td>
        <div class="layui-unselect layui-form-checkbox" lay-skin="primary" data-id='2'><i class="layui-icon">&#xe605;</i></div>
      </td>
      <td>{{post._id}}</td>
      <td>{{post.title}}</td>
      <td>{{post.created}}</td>
      <td class="td-manage">
        <a title="编辑" onclick="showPost('{{post._id}}')">
          <i class="layui-icon">&#xe642;</i>
        </a>
        <a title="删除">
          <i class="layui-icon">&#xe640;</i>
        </a>
      </td>
    </tr>
    {% else %}
    没有数据
    {% endfor %}
  </tbody>
</table>
{% endblock %}
{% block scriptblock %}
<script>
  $(function () {
    layui.use('layer', function () {
      var layer = layui.layer;
    })
  })
  function showPost(id) {
    $.get('/admin/post/' + id, function (res) {
      if (res.code != 400) {
        layer.open({
          title:res.data.title,
          type: 1,
          area:['375px','667px'],
          offset:'60px',
          content:'<div class="markdown" style="padding:15px">'+res.data.content+'</div>'   
        });
      }
    })
  }
</script>
{% endblock %}